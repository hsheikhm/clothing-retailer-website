/*! clothing-retailer-website 03-05-2016 */
var clothingApp=angular.module("clothingApp",["ngRoute","ngResource","ngAnimate","clothingAppControllers","clothingAppServices","clothingAppDirectives"]);clothingApp.config(["$routeProvider",function(a){a.when("/home",{templateUrl:"partials/home-page.html"}).when("/home/shopping-cart",{templateUrl:"partials/shopping-cart-page.html"}).when("/home/:category",{templateUrl:"partials/category-page.html",controller:"CategoryCtrl",controllerAs:"category"}).otherwise({redirectTo:"/home"})}]);var clothingAppControllers=angular.module("clothingAppControllers",[]);clothingAppControllers.controller("CategoryCtrl",["$routeParams","Products",function(a,b){var c=this;b.getList(a.category).then(function(a){c.products=a.data.products,c.productCategory=c.products[0].category})}]),clothingAppControllers.controller("CustomerCtrl",["ShoppingCart",function(a){var b=this,c=new a;b.shoppingCart=c.cart,b.addToCart=function(a){return c.add(a)?!0:(b.selectedProduct=a,void b.printOutOfStockMessage(a))},b.printOutOfStockMessage=function(a){return b.selectedProduct===a},b.removeFromCart=function(a){c.remove(a)},b.cartTotalPrice=function(){return c.totalPrice},b.checkValidVoucher=function(){b.voucherOneValid()?b.applyDiscount(5):b.voucherTwoValid()?b.applyDiscount(10):b.voucherThreeValid()?b.applyDiscount(15):(b.invalidVoucher=!0,b.discountMessage=!1)},b.voucherOneValid=function(){return"001"===b.voucherCode&&b.cartTotalPrice()>=5},b.voucherTwoValid=function(){return"002"===b.voucherCode&&b.cartTotalPrice()>=50},b.voucherThreeValid=function(){return"003"===b.voucherCode?c.orderedMoreThanOneFootwearItem()&&b.cartTotalPrice()>=75:!1},b.applyDiscount=function(a){c.totalPrice-=a,b.discount=a,b.invalidVoucher=!1,b.discountMessage=!0,b.voucherCode=""}}]);var clothingAppDirectives=angular.module("clothingAppDirectives",[]);clothingAppDirectives.directive("mensCategories",function(){return{restrict:"E",templateUrl:"partials/mens-categories.html"}}),clothingAppDirectives.directive("womensCategories",function(){return{restrict:"E",templateUrl:"partials/womens-categories.html"}}),clothingAppDirectives.directive("productsList",function(){return{restrict:"E",templateUrl:"partials/products-list.html"}}),clothingAppDirectives.directive("itemsOrdered",function(){return{restrict:"E",templateUrl:"partials/items-ordered.html"}});var clothingAppServices=angular.module("clothingAppServices",[]);clothingAppServices.factory("Products",["$http",function(a){return{getList:function(b){return a.get("products/"+b+".json")}}}]),clothingAppServices.factory("ShoppingCart",function(){function a(){this.cart=[],this.totalPrice=0,this.add=function(a){return this.productIsAvailable(a)?(this.cart.push(a),a.quantity-=1,this.calculateTotalPrice(),!0):!1},this.productIsAvailable=function(a){return a.quantity>0},this.remove=function(a){position=this.cart.indexOf(a),this.cart.splice(position,1),a.quantity+=1,this.calculateTotalPrice()},this.calculateTotalPrice=function(){var a=0;this.cart.forEach(function(b){a+=b.price}),this.totalPrice=a},this.orderedMoreThanOneFootwearItem=function(){var a=0;return this.cart.forEach(function(b){"Menâ€™s Foot-wear"!==b.category&&"Womenâ€™s Foot-wear"!==b.category||(a+=1)}),a>0}}return a});